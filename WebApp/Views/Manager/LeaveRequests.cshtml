@model WebApp.Domain.LeaveRequest

@{
    ViewData["Title"] = "RequestLeave";
    ViewData["Stylesheet"] = "/css/manager.css";
}
<header>
    <h1>Verlofaanvragen</h1>
</header>
<div class="watermark_concept">
    <p class="concept_text">CONCEPT</p>
</div>
<table>
    <tr class="tr_bg">
        <th>Naam</th>
        <th width="20%">Duur</th>
        <th>Status</th>
        <th>Reden</th>
        <th>Aanvraagdatum</th>
        <th>Actie</th>
    </tr>


    @foreach (var request in ViewBag.Requests)
    {
        <form>
        <tr class="tr_bg">
            <!--Show the Employee name-->
            <td>@request.EmployeeId</td>
            <td>
                <b>@request.StartDate.ToShortDateString() &ndash; @request.EndDate.ToShortDateString()</b><br>
                <i>@request.EndDate.Subtract(request.StartDate)</i>
            </td>

            <td>
                    @if (ViewBag.Status.Equals("Approved"))
                    {
                    <span class="accepted"> @request.LeaveRequestStatus </span>
                    }
                    else if (ViewBag.Status.Equals("Rejected"))
                    {
                    <span class="rejected"> @request.LeaveRequestStatus </span>
                    }
                    else if (ViewBag.Status.Equals("Pending"))
                    {
                    <span class="pending"> @request.LeaveRequestStatus </span>
                    }
            </td>

            <td>@request.Comment</td>

            <!-- Fix, saying 1-1-0001 which is not correct -->
            <td>@request.InsertDate.ToShortDateString()</td>

            <!-- if the status is pending, show the buttons -->
                @if (!ViewBag.Status.Equals("Pending"))
                {
                <td>
                    <!--use the RejectLeaveRequest in the controller-->
                    <button class="red_button" asp-action="RejectLeaveRequest" asp-route-id="@request.Id">Weigeren</button>
                    <button class="green_button" asp-action="ApproveLeaveRequest" asp-route-id="@request.Id">Accepteren</button>
                </td>
                }
                else
                {
                <!--Here for not a random empty place in the table-->
                <td></td>
                }
        </tr>
        </form>

    }

    <tr class="tr_bg">
        <td>Kevin Schuren</td>
        <td>
            <b>23 Nov 2022 &ndash; 27 Nov 2022</b><br />
            <i>5 dagen</i>
        </td>
        <td><span class="pending">Openstaand</span></td>
        <td>Vakantie</td>
        <td>6 Nov 2022</td>
        <td>
            <button class="red_button">Weigeren</button>
            <button class="green_button">Accepteren</button>
        </td>
    </tr>
    <tr class="tr_bg">
        <td>Katja Ryzhkova</td>
        <td>
            <b>22 Nov 2022 &ndash; 24 Nov 2022</b><br />
            <i>3 dagen</i>
        </td>
        <td><span class="accepted">Goedgekeurd</span></td>
        <td>Ziekte</td>
        <td>2 Nov 2022</td>
        <td></td>
    </tr>
    <tr class="tr_bg">
        <td>Chinook Walther</td>
        <td>
            <b>28 Nov 2022 &ndash; 31 Nov 2022</b><br />
            <i>4 dagen</i>
        </td>
        <td><span class="rejected">Afgekeurd</span></td>
        <td>Vakantie</td>
        <td>10 Jul 2022</td>
        <td></td>
    </tr>
    <tr class="tr_bg">
        <td>Thampie Anthonyrajah</td>
        <td>
            <b>9 Nov 2022 &ndash; 31 Nov 2022</b><br />
            <i>23 dagen</i>
        </td>
        <td><span class="accepted">Goedgekeurd</span></td>
        <td>Vakantie</td>
        <td>8 Jul 2022</td>
        <td></td>
    </tr>
</table>
<p class="align_right">
    Pagina 1 van 1
    <select>
        <option>10 per pagina</option>
        <option>25 per pagina</option>
        <option>50 per pagina</option>
    </select>
</p>
<p class="align_right">
    <a asp-controller="Manager" asp-action="LeaveRequests" class="visible_link">Vorige pagina</a>
    <a asp-controller="Manager" asp-action="LeaveRequests" class="visible_link">Volgende pagina</a>
</p>
