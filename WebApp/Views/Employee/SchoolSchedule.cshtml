@{
    ViewData["Title"] = "Schoolrooster";
    ViewData["Stylesheet"] = "/css/employee.css";


}

<div id="EditTime"></div>
<div class="modal-body">
    <div class="align-items-center" id="title">
        <h1 class="text-center">
            Schoolrooster
        </h1>
    </div>
    <br />
    <table class="container table_style">
        <tr>
            <td></td>
            <td>07:00</td>
            <td>08:00</td>
            <td>09:00</td>
            <td>10:00</td>
            <td>11:00</td>
            <td>12:00</td>
            <td>13:00</td>
            <td>14:00</td>
            <td>15:00</td>
            <td>16:00</td>
            <td>17:00</td>
            <td>18:00</td>
            <td>19:00</td>
            <td>20:00</td>
            <td>21:00</td>
            <td style="color:white; font-size:0">00:00</td>
        </tr>

        @{
            int count = 0;
            int indexDay = 0;
        }
        @if (@ViewBag.Schedule != null)
        {
            @foreach (var item in ViewBag.Days as List<WebApp.Domain.Weekday>)
            {
                @if (count == @ViewBag.Schedule.Count)
                {
                    count = 0;
                }
                <tr>
                    @{
                        TimeSpan totalHours = (ViewBag.Schedule[count].EndTime - ViewBag.Schedule[count].StartTime).Duration();

                    }
                    <td class="day_div"><b>@WebApp.Domain.Weekdays.GetName(item) </b></td>
                    @if (item == @ViewBag.Schedule[count].Weekday)
                    {
                        <td class="length_hour" colspan="15">
                            <div class="work_line" onload="setLine(@ViewBag.Schedule[count].StartTime)" style="margin-left:0%;">
                                <span>@ViewBag.Schedule[count].StartTime.ToString("HH:mm")</span>
                                <span style="float: right">@ViewBag.Schedule[count].EndTime.ToString("HH:mm")</span>
                            </div>
                        </td>
                        <td class="extra_info">
                            @totalHours.ToString(@"h\:mm")
                            <button type="button" data-toggle="ajax-modal" data-target="#editSchoolSchedule"
                        data-url="@Url.Action("EditSchoolSchedule",
                                    new{day = WebApp.Domain.Weekdays.GetName(item),
                                       weekday = item,
                                       employeeId = ViewBag.EmployeeId,
                                       schoolScheduleId = ViewBag.Schedule[count].Id})" class="edit_button">
                                Edit
                            </button>
                        </td>
                        count++;
                    }
                    else
                    {
                        <td class="length_hour" colspan="15">
                        </td>
                        <td class="extra_info">
                            0:00
                            <button type="button" data-toggle="ajax-modal"
                        data-target="#editSchoolSchedule"
                        data-url="@Url.Action("EditSchoolSchedule",
                                    new{day = WebApp.Domain.Weekdays.GetName(item), weekday = item, employeeId = ViewBag.EmployeeId })" class="edit_button">
                                Edit
                            </button>
                        </td>
                    }
                </tr>
                indexDay++;
            }
        }
        else
        {
            @foreach (var item in ViewBag.Days as List<WebApp.Domain.Weekday>)
            {
                <tr>
                    <td class="day_div"><b>@WebApp.Domain.Weekdays.GetName(item)</b></td>
                    <td class="length_hour" colspan="15">
                    </td>
                    <td class="extra_info">
                        0:00
                        <button type="button" data-toggle="ajax-modal"
                        data-target="#editSchoolSchedule"
                        data-url="@Url.Action("EditSchoolSchedule",
                        new{day = WebApp.Domain.Weekdays.GetName(item), weekday = item, employeeId = ViewBag.EmployeeId })" class="edit_button">
                            Edit
                        </button>
                    </td>
                </tr>
                indexDay++;
            }
        }
    </table>

    <div class="space_around">
        <button type="button" onclick="location.href='@Url.Action("DeleteAllSchoolSchedule", "Employee", new {employeeId = ViewBag.EmployeeId})'">Verwijder Alles</button>
    </div>
</div>
